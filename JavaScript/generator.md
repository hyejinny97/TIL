# âœ” ì œë„ˆë ˆì´í„°

- ì œë„ˆë ˆì´í„°(generator): í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ì¤‘ê°„ì— ë©ˆì¶”ê³  ì¬ê°œí•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥
- ì œë„ˆë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ í•„ìš”í•œ ìˆœê°„ì— ê°’ì„ ê³„ì‚°í•´ì„œ ì „ë‹¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì¸¡ë©´ì—ì„œ íš¨ìœ¨ì ì„

### ğŸ”¹ ì œë„ˆë ˆì´í„° ì´í•´í•˜ê¸°

- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ëŠ” ë³„í‘œ `*`ì™€ í•¨ê»˜ ì •ì˜ë¨

  - `yield` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•´ í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ ë©ˆì¶œ ìˆ˜ ìˆìŒ
  - ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ ì‹¤í–‰(í˜¸ì¶œ)í•˜ë©´, ì œë„ˆë ˆì´í„° ê°ì²´ë§Œ ë°˜í™˜ë˜ê³  ì‹¤ì œ í•¨ìˆ˜ ë‚´ë¶€ ì½”ë“œëŠ” ì‹¤í–‰ë˜ì§€ ì•ŠìŒ
  - ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” `next`, `return`, `throw` ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆìŒ

  ```js
  function* f1() {
    yield 10;
    yield 20;
    return "finished";
  }

  const gen = f1();
  ```

- `next` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´, `yield` í‚¤ì›Œë“œë¥¼ ë§Œë‚  ë•Œê¹Œì§€ ì‹¤í–‰ë˜ê³  ë°ì´í„° ê°ì²´ë¥¼ ë°˜í™˜

  - `yield` í‚¤ì›Œë“œë¥¼ ë§Œë‚˜ë©´, ë°ì´í„° ê°ì²´ëŠ” `done: false`ê°€ ë¨
  - `yield` í‚¤ì›Œë“œë¥¼ ë§Œë‚˜ì§€ ëª»í•˜ë©´, ë°ì´í„° ê°ì²´ëŠ” `done: true`ê°€ ë¨

  ```js
  console.log(gen.next()); // {value: 10, done: false}
  console.log(gen.next()); // {value: 20, done: false}
  console.log(gen.next()); // {value: 'finished', done: true}
  ```

- `return` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´, ë°ì´í„° ê°ì²´ëŠ” `done: false`ê°€ ë¨

  - ì´í›„ì— `next` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ë„ `done: false`ê°€ ë¨

  ```js
  console.log(gen.next()); // {value: 10, done: false}
  console.log(gen.return("abc")); // {value: 'abc', done: true}
  console.log(gen.next()); // {value: undefined, done: true}
  ```

- `throw` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´, ì˜ˆì™¸ê°€ ë°œìƒí•œ ê²ƒìœ¼ë¡œ ì²˜ë¦¬ë˜ê¸° ë•Œë¬¸ì— catch ë¬¸ìœ¼ë¡œ ë“¤ì–´ê°€ê³  ë°ì´í„° ê°ì²´ëŠ” `done: false`ê°€ ë¨

  ```js
  function* f1() {
    try {
      yield 10;
      yield 20;
    } catch (e) {
      console.log(e); // some error
    }
  }

  const gen = f1();
  console.log(gen.next()); // {value: 10, done: false}
  console.log(gen.throw("some error")); // {value: undefined, done: true}
  ```

- ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ë°˜ë³µ ê°€ëŠ¥(iterable)í•˜ë©´ì„œ ë°˜ë³µì(iterator)ì„

  - ë°˜ë³µì(iterator)ì¸ ê°ì²´ì˜ íŠ¹ì§•
    - `next` ë©”ì„œë“œë¥¼ ê°€ì§€ê³  ìˆìŒ
    - `next` ë©”ì„œë“œëŠ” `value`ì™€ `done` ì†ì„±ê°’ì„ ê°€ì§„ ê°ì²´ë¥¼ ë°˜í™˜í•¨
    - `done` ì†ì„±ê°’ì€ ì‘ì—…ì´ ëë‚¬ì„ ë•Œ ì°¸ì´ ë¨
  - ë°˜ë³µ ê°€ëŠ¥(iterable)í•œ ê°ì²´ì˜ íŠ¹ì§•
    - `Symbol.iterator` ì†ì„±ê°’ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆìŒ
    - í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ë°˜ë³µì(iterator)ë¥¼ ë°˜í™˜í•¨

  ```js
  // ArrayëŠ” ë°˜ë³µ ê°€ëŠ¥(iterable)í•œ ê°ì²´ì„
  const arr = [10, 20, 30];
  const iter = arr[Symbol.iterator]();

  console.log(iter.next()); // {value: 10, done: false}
  ```

  ```js
  // ì œë„ˆë ˆì´í„° ê°ì²´ëŠ” ë°˜ë³µ ê°€ëŠ¥(iterable)í•œ ê°ì²´ì„
  function* f1() {
    yield 10;
    yield 20;
  }

  const gen = f1();

  console.log(gen[Symbol.iterator]() === gen); // true
  ```

- ë°˜ë³µ ê°€ëŠ¥(iterable)í•œ ê°ì²´ëŠ” `for` ~ `of`ë¬¸ê³¼ ì „ê°œ ì—°ì‚°ìì—ì„œ ìœ ìš©í•¨

  - `for` ~ `of`ë¬¸ì€ ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´ë¡œë¶€í„° ë°˜ë³µì(iterator)ë¥¼ ì–»ì–´, `next` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ì„œ `done: true`ê°€ ë  ë•Œê¹Œì§€ ë°˜ë³µí•¨
  - ì „ê°œ ì—°ì‚°ìë„ `done: true`ê°€ ë  ë•Œê¹Œì§€ ê°’ì„ í¼ì¹¨

  ```js
  for (const v of f1()) {
    console.log(v);
  }
  ```

  ```js
  const arr = [...f1()];
  console.log(arr); // [10, 20]
  ```

### ğŸ”¹ ì œë„ˆë ˆì´í„° í™œìš©í•˜ê¸°

- ì œë„ˆë ˆì´í„°ë¥¼ ì´ìš©í•˜ë©´ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì˜ ëŒ€í‘œì ì¸ í•¨ìˆ˜ë¥¼ ì‰½ê²Œ êµ¬í˜„ ê°€ëŠ¥í•¨

  - ì œë„ˆë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì—°ì‚°ì´ í•„ìš”í•œ ìˆœê°„ì—ë§Œ ì‹¤í–‰ë¨ ğŸ‘‰ ì§€ì—° í‰ê°€ (lazy evaluation)
  - ì œë„ˆë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ í•„ìš”í•œ ì—°ì‚°ë§Œ ìˆ˜í–‰ë¨
    - ë”°ë¼ì„œ, ìì—°ìˆ˜ì˜ ì§‘í•©ì²˜ëŸ¼ ë¬´í•œëŒ€ë¡œ ê°’ì„ í‘œí˜„í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•¨

  ```js
  function* map(iter, mapper) {
    for (const v of iter) {
      yield mapper(v);
    }
  }

  map([1, 2, 3], (n) => n * 10);
  ```

  ```js
  function* natureNumber() {
    let v = 1;
    while (true) {
      yield v++;
    }
  }

  const values = naturalNumbers();
  ```

- ì œë„ˆë ˆì´í„° í•¨ìˆ˜ì—ì„œ ë‹¤ë¥¸ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•ŒëŠ” `*yield` í‚¤ì›Œë“œë¥¼ ì´ìš©

  - `*yield` í‚¤ì›Œë“œ ì˜¤ë¥¸ìª½ì—ëŠ” ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´ê°€ ì˜¬ ìˆ˜ ìˆìŒ

  ```js
  function* f1() {
    yield 2;
    yield 3;
  }

  function* f2() {
    yield 1;
    yield* f1();
    yield 4;
  }

  console.log(...f2()); // 1 2 3 4
  ```

- `next` ë©”ì„œë“œì˜ ì¸ìˆ˜ë¥¼ í†µí•´ ì œë„ˆë ˆì´í„° í•¨ìˆ˜ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŒ

  - `next` ë©”ì„œë“œë¥¼ í†µí•´ì„œ ì „ë‹¬ëœ ì¸ìˆ˜ëŠ” `yield` í‚¤ì›Œë“œì˜ ê²°ê³¼ê°’ìœ¼ë¡œ ë°›ì„ ìˆ˜ ìˆìŒ

  ```js
  function* f1() {
    const data = yield;
    console.log(data); // 10
  }

  const gen = f1();

  gen.next(10);
  ```
