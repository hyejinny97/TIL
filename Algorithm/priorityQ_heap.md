# ✔ 우선순위 큐 (Priority Queue)

- 순서가 아닌 우선순위를 기준으로 가져올 요소를 결정하는 큐 자료구조

> 큐 vs 우선순위 큐

- 큐 (Queue): **순서**를 기준으로 가장 먼저 들어온 데이터가 가장 먼저 나감
- 우선순위 큐 (Priority Queue): **우선순위**를 기준으로 가장 우선순위가 높은 데이터가 가장 먼저 나감
  - 우선순위: 중요도, 크기 등 순서 이외의 기준

> 우선순위 큐 자료구조의 대표 동작

1. `dequeue`
   - 우선순위 큐의 가장 우선순위가 높은 데이터를 가져오는 행위
2. `enqueue`
   - 우선순위 큐의 맨 뒤에 데이터를 삽입하는 행위

> 우선순위 큐의 필요성

1. 가중치가 있는 데이터를 우선순위에 따라 처리
2. 작업 스케줄링
3. 네트워크

> 우선순위 큐를 구현하는 방법

1. 배열 (Array)
   
   - 1-1) 데이터를 제거(Dequeue)할 때 우선순위 별로 제거하는 경우
   - 1-2) 데이터를 추가(enqueue)할 때 우선순위 별로 추가하는 경우

2. 연결 리스트 (Linked List)
   
   - 1-1) 데이터를 제거(Dequeue)할 때 우선순위 별로 제거하는 경우
   - 1-2) 데이터를 추가(enqueue)할 때 우선순위 별로 추가하는 경우

3. 힙 (Heap)
   
   | 연산 종류     | Enqueue(추가) | Dequeue(제거) |
   | --------- | ----------- | ----------- |
   | 배열 1-1    | O(1)        | O(N)        |
   | 배열 1-2    | O(N)        | O(1)        |
   | 연결리스트 1-1 | O(1)        | O(N)        |
   | 연결리스트 1-2 | O(N)        | O(1)        |
   | 힙         | O(logN)     | O(logN)     |

> 파이썬의 경우

- 파이썬은 **리스트** (List)로 우선순위 큐를 사용할 수 있음
  - 단점: 하나의 데이터 추가 또는 제거 시, 시간복잡도 O(N)
    - 우선순위에 따라 데이터를 추가/제거하기 위해서는 N개의 데이터를 모두 확인해야하기 때문
    - 따라서, N개의 데이터를 모두 추가/제거하면 O(N^2)의 시간복잡도가 걸림
    - 해결방법: 리스트 대신 **`힙 (heap)`** 이용

# ✔ 힙 (Heap)

- 최댓값 또는 최솟값을 빠르게 찾아내도록 만들어진 데이터 구조
- 완전 이진 트리의 형태로 느슨한 정렬 상태를 지속적으로 유지
  - ex) 느슨한 정렬 상태: 1 3 2 5 4
- 힙 트리에서는 중복 값을 허용

> 힙의 필요성

1. 데이터가 지속적으로 정렬되어야 하는 경우
2. 데이터에 삽입/삭제가 빈번할 때

> 파이썬의 힙 (heap) - `heapq`

- 최소 힙(MinHeap)으로 구현되어 있어, 가장 작은 값이 먼저 옴

- 삽입, 삭제, 수정, 조회 연산의 속도가 리스트보다 빠름
  
  | 연산 종류       | 힙(Heap) | 리스트(List)    |
  | ----------- | ------- | ------------ |
  | Get Item    | O(1)    | O(1)         |
  | Insert Item | O(logN) | O(1) 또는 O(N) |
  | Delete Item | O(logN) | O(1) 또는 O(N) |
  | Search Item | O(N)    | O(N)         |

1. `heapq.heapify(iterable)`
   - iterable 객체를 힙으로 변환
   - destructive method로 원본이 바뀜, 반환 x
2. `heapq.heappop(heap)`
   - heap에서 가장 작은 항목을 제거 및 반환
3. `heapq.heappush(heap, item)`
   - item 값을 heap으로 푸시

    ```python
    import heapq

    nums = [45, 1, 2, 32]
    arr = []
    for num in nums:
      heapq.heappush(arr, num)

    for num in nums:
      print(heapq.heappop(arr), end=' ')   # 1 2 32 45
    ```  