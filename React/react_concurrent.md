# âœ” Concurrent ëª¨ë“œ

> ì°¸ê³ ) [ë¦¬ì•¡íŠ¸ 18ì˜ ì‹ ê¸°ëŠ¥ - Concurrent Rendering, Automatic Batching ë“±](https://www.freecodecamp.org/korean/news/riaegteu-18yi-singineung-dongsiseong-rendeoring-concurrent-rendering-jadong-ilgwal-ceori-automatic-batching-deung/)

## â–¶ ë¸”ë¡œí‚¹ vs ë…¼ë¸”ë¡œí‚¹ ë Œë”ë§

- ë¦¬ì•¡íŠ¸ì˜ concurrent ëª¨ë“œë¥¼ í†µí•´ ë…¼ë¸”ë¡œí‚¹(non-blocking) ë Œë”ë§ì´ ê°€ëŠ¥í•´ì§
- concurrent ëª¨ë“œ ì´ì „ì—ëŠ” ë Œë”ë§ì„ í•œë²ˆ ì‹œìž‘í•˜ë©´ ì¤‘ê°„ì— ë©ˆì¶œ ìˆ˜ê°€ ì—†ì—ˆìŒ

  - ë”°ë¼ì„œ, ì»´í¬ë„ŒíŠ¸ ê°œìˆ˜ê°€ ë§Žì€ ê²½ìš° ì‚¬ìš©ìžì˜ ìš”ì²­ì— ë°”ë¡œ ë°˜ì‘í•  ìˆ˜ ì—†ì—ˆìŒ

- concurrent ëª¨ë“œì—ì„œëŠ” ë Œë”ë§ ê³¼ì •ì„ ì—¬ëŸ¬ ê°œì˜ ìž‘ì—…ìœ¼ë¡œ ë‚˜ëˆ ì„œ ì‹¤í–‰ ì¤‘ì¸ ìž‘ì—…ì„ ì¤‘ë‹¨í•˜ê±°ë‚˜ ì¤‘ë‹¨ëœ ìž‘ì—…ì„ ìž¬ê°œí•  ìˆ˜ ìžˆìŒ

  - ìž‘ì—…ì´ ì¼ì • ì‹œê°„ì„ ì´ˆê³¼í•˜ê±°ë‚˜, í˜„ìž¬ ì‹¤í–‰ ì¤‘ì¸ ìž‘ì—…ë³´ë‹¤ ìš°ì„ ìˆœìœ„ê°€ ë” ë†’ì€ ìž‘ì—…ì´ ë“¤ì–´ì˜¤ë©´ í˜„ìž¬ ìž‘ì—…ì„ ì¤‘ë‹¨í•  ìˆ˜ ìžˆìŒ

## â–¶ ìž‘ì—…ì˜ ìš°ì„ ìˆœìœ„ë¥¼ í†µí•œ íš¨ìœ¨ì ì¸ CPU ì‚¬ìš©

- ë Œë”ë§ ìž‘ì—…ë³„ë¡œ ìš°ì„ ìˆœìœ„ë¥¼ ë¶€ì—¬í•˜ë©´ ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§„ ìž‘ì—…ì„ ë¨¼ì € ì²˜ë¦¬í•¨ìœ¼ë¡œì¨ CPUë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆìŒ

## â–¶ `Suspense`ë¡œ ê°€ëŠ¥í•´ì§„ ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ ë‚´ ë¹„ë™ê¸° ì²˜ë¦¬

- SuspenseëŠ” ë Œë”ë§ ê³¼ì •ì—ì„œ API í˜¸ì¶œê³¼ ê°™ì€ **ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì§€ì›**í•˜ëŠ” ê¸°ëŠ¥ìž„
- SuspenseëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ê³¼ ê°™ì€ ì‹œê° íš¨ê³¼ë¥¼ ë³´ì—¬ ì¤„ ë°©ë²•ì„ ì œê³µí•¨

  - ì´í›„ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì™„ë£Œë˜ë©´ ì¤‘ë‹¨í–ˆë˜ ë Œë”ë§ì„ ìž¬ê°œí•¨

### ðŸ”¹ ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ ë‚´ì—ì„œ ë¹„ë™ê¸°ë¡œ ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°

- `Suspense` ì»´í¬ë„ŒíŠ¸ì™€ `lazy` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ ëª¨ë“ˆì˜ ë¹„ë™ê¸° ë‹¤ìš´ë¡œë“œë¥¼ ë Œë”ë§ ê³¼ì •ì— ìžì—°ìŠ¤ëŸ½ê²Œ í¬í•¨ì‹œí‚¬ ìˆ˜ ìžˆìŒ

  - `lazy` í•¨ìˆ˜ë¥¼ ë™ì  ìž„í¬íŠ¸ì™€ í•¨ê»˜ í˜¸ì¶œí•˜ë©´ ëª¨ë“ˆì˜ ë¹„ë™ê¸° ë‹¤ìš´ë¡œë“œë¥¼ ë„ì™€ì£¼ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë°˜í™˜ë¨
  - Suspenseì˜ ìžì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì‹œìž‘ë˜ë©´, Suspense ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì˜ ëª¨ë“  ë Œë”ë§ì´ ë©ˆì¶˜ í›„ fallback ì†ì„±ê°’ìœ¼ë¡œ ìž…ë ¥ëœ ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë¨
  - `lazy` í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ì§„ VideoPlayer ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë  ë•Œ ë¶„í• ëœ ì½”ë“œë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ëŠ”ë°, ì½”ë“œë¥¼ ë°›ê¸° ì „ê¹Œì§€ Suspense ë‚´ë¶€ëŠ” Loading ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë¨

  ```js
  // App.js
  import { lazy, Suspense } from "react";
  import Loading from "./Loading";

  const VideoPlayer = lazy(() => import("./VideoPlayer"));

  export default function App() {
    return (
      <div>
        <h1>suspense example</h1>
        <Suspense fallback={<Loading />}>
          <h3>watch video</h3>
          <VideoPlayer />
        </Suspense>
      </div>
    );
  }
  ```

### ðŸ”¹ ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ ë‚´ì—ì„œ APIë¡œ ë°ì´í„° ë°›ê¸°

- Suspense ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œëŠ” ë Œë”ë§ ì¤‘ì´ë¼ê³  í•˜ë”ë¼ë„ APIë¥¼ í˜¸ì¶œí•  ìˆ˜ ìžˆìŒ
- concurrent ëª¨ë“œë¡œ ë™ìž‘í•˜ì§€ ì•ŠëŠ” ë¦¬ì•¡íŠ¸ ë²„ì „ì˜ ê²½ìš°, ë¹„ë™ê¸° ë Œë”ë§ì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ë Œë”ë§ ì¤‘ì— ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ë°œìƒí•˜ë©´ ë©ˆì·„ë‹¤ê°€ ë‚˜ì¤‘ì— ì¤‘ë‹¨ëœ ë¶€ë¶„ë¶€í„° ë‹¤ì‹œ ì‹œìž‘í•  ìˆ˜ ì—†ìŒ

  - ë”°ë¼ì„œ, ë™ê¸° ë Œë”ë§ì—ì„œì˜ SuspenseëŠ” fallbackìœ¼ë¡œ ìž…ë ¥ëœ ì»´í¬ë„ŒíŠ¸ê°€ ë°”ë¡œ ì‚¬ìš©ë˜ê³ , ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ëë‚˜ë©´ ë‹¤ì‹œ í•œë²ˆ ë Œë”ë§ë¨

- ë Œë”ë§ ê³¼ì •ì—ì„œ ë¹„ë™ê¸°ë¡œ ë°ì´í„°ë¥¼ ë°›ëŠ” ì½”ë“œë¥¼ ìž‘ì„±í•˜ê¸° ì „ í•„ìš”í•œ íŒ¨í‚¤ì§€ë¥¼ ë¨¼ì € ì„¤ì¹˜í•´ë³´ìž

  - `react-cache`ëŠ” ë Œë”ë§ ê³¼ì •ì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ ë¦¬ì•¡íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” íŒ¨í‚¤ì§€ìž„

- 'Profile.js' íŒŒì¼ì„ ìƒì„±í•˜ê³ , ì»´í¬ë„ŒíŠ¸ í•¨ìˆ˜ ë‚´ì—ì„œ APIë¥¼ í˜¸ì¶œí•˜ëŠ” ì½”ë“œë¥¼ ìž‘ì„±í•˜ìž

  - `read` ë©”ì„œë“œë¥¼ í˜¸ì¶œí–ˆì„ ë•Œ ì´ë¯¸ ë°›ì€ ë°ì´í„°ê°€ ìžˆë‹¤ë©´ ê·¸ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³ , ì—†ë‹¤ë©´ fetchUser í•¨ìˆ˜ê°€ ì‹¤í–‰ë¨
  - fetchUser í•¨ìˆ˜ê°€ ë°˜í™˜í•˜ëŠ” Promise ê°ì²´ì™€ í•¨ê»˜ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚´
  - Promise ê°ì²´ì™€ í•¨ê»˜ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´, ë¶€ëª¨ë¡œ ê±°ìŠ¬ëŸ¬ ì˜¬ë¼ê°€ë©´ì„œ ê°€ìž¥ ê°€ê¹Œìš´ Suspense ì»´í¬ë„ŒíŠ¸ë¥¼ ì°¾ê²Œë¨
  - ê·¸ëŸ¬ë©´ Suspense ì»´í¬ë„ŒíŠ¸ëŠ” ë‚´ë¶€ ì˜ì—­ì„ fallbackìœ¼ë¡œ ëŒ€ì²´í•˜ê³ , ì¶”í›„ Promiseê°€ settled ìƒíƒœê°€ ë˜ë©´ ë‹¤ì‹œ ë Œë”ë§í•˜ê²Œ ë¨
  - ì°¸ê³ ) `lazy` í•¨ìˆ˜ë¡œ ìƒì„±í•œ ì»´í¬ë„ŒíŠ¸ë„ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì‹œìž‘ë˜ë©´ Promise ê°ì²´ì™€ í•¨ê»˜ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚´

  ```js
  // profile.js
  import { unstable_createResource } from "react-cache";

  function fetchUser(userId) {
    return new Promise((resolve) =>
      setTimeout(() => resolve({ userId, name: "mike", age: 23 }), 2000)
    );
  }

  const UserCache = unstable_createResource(fetchUser);

  function Profile() {
    const user = UserCache.read(123);
    return (
      <div>
        <p>name: {user.name}</p>
        <p>age: {user.age}</p>
      </div>
    );
  }
  ```

### ðŸ”¹ Suspense ë‚´ë¶€ì—ì„œ ì—¬ëŸ¬ ê°œì˜ í”„ë¡œë¯¸ìŠ¤ ë°œìƒì‹œí‚¤ê¸°

- Suspense ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì˜ˆì™¸ë¡œ ë°œìƒí•˜ëŠ” ëª¨ë“  Promise ê°ì²´ê°€ settled ìƒíƒœê°€ ë˜ê¸° ì „ê¹Œì§€ëŠ” Loading ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë¨

  ```js
  // App.js
  // ...
  const VideoPlayer = lazy(() => import("./VideoPlayer"));

  export default function App() {
    return (
      <div>
        <h1>suspense example</h1>
        <Suspense fallback={<Loading />}>
          <h3>watch video</h3>
          <VideoPlayer />
          <Profile />
        </Suspense>
      </div>
    );
  }
  ```
